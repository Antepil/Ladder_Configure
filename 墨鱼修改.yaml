#==========================================
# @ConfigName        墨鱼自用MihomoParty配置文件
# @Author            @ddgksf2013
# @TgChannel         https://t.me/ddgksf2021
# @WechatID          墨鱼手记
# @Feedback          💡请通过邮件反馈问题[其它方式一概无视]：𝐝𝐝𝐠𝐤𝐬𝐟𝟐𝟎𝟏𝟑@𝟏𝟔𝟑.𝐜𝐨𝐦 💡
# @UpdateTime        2025/01/04 14:28 UTC/GMT +8
# @Function          支持手动选择、自动测速、广告屏蔽、兜底分流、按国家分组节点、策略图标等  
# @mihomo-party      https://github.com/mihomo-party-org/mihomo-party/releases
# @howtouse          主界面添加本配置[覆写]，然后使用内置的[SubStore]添加机场，之后去[订阅管理]，在配置的[编辑信息]中绑定机场订阅，开启系统代理即可使用
# @Thanks            @blackmatrix7, @Fndroid, @Anti, @Orz-3, @Koolson, @soffchen, @ACL4SSR, @Cats-Team
# @ConfigVersion     1.0.17
# @ConfigUrl         https://github.com/ddgksf2013/Profile/raw/master/MihomoParty.yaml
#==========================================

proxy-groups:
  #分流分组
    - {name: 手动切换, type: select, include-all: true, icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png }
    - {name: 全球加速, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png }
    - {name: 苹果服务, type: select, proxies: [DIRECT, 手动切换, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png }
    - {name: 微软服务, type: select, proxies: [DIRECT, 手动切换, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Microsoft.png }
    - {name: 哔哩哔哩, type: select, proxies: [DIRECT, 香港节点, 台湾节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/bilibili.png }
    - {name: Emby服务, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Emby.png }
    - {name: Netflix奈飞, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://github.com/clash-verge-rev/clash-verge-rev.github.io/raw/main/docs/assets/icons/netflix.svg }
    - {name: OpenAi,   type: select, proxies: [手动切换,香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png }
    - {name: 油管服务, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png }
    - {name: 国际媒体, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png }
    - {name: 谷歌服务, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Google.png }
    - {name: 电报消息, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Telegram.png }
    - {name: Notion, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://img.icons8.com/?size=100&id=nvtEH6DpqruC&format=png}
    - {name: Github, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Telegram.png }
    - {name: 推特服务, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Twitter.png }
    - {name: 游戏平台, type: select, proxies: [DIRECT, 手动切换, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/GAME.png }
    - {name: AdBlock,  type: select, proxies: [REJECT, DIRECT], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Adblock.png }
    - {name: 兜底分流, type: select, proxies: [手动切换, DIRECT, 自动选择, 香港节点, 日本节点, 台湾节点, 美国节点, 狮城节点], icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png }
    
  #节点分组
    - {name: 自动选择, type: url-test, include-all: true, interval: 600, tolerance: 50,  icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/Urltest.png }
    - {name: 香港节点, type: url-test, include-all: true, interval: 600, tolerance: 50,  filter: "港|HK|(?i)Hong", icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png }             
    - {name: 日本节点, type: url-test, include-all: true, interval: 600, tolerance: 50,  filter: "日|东京|JP|(?i)Japan", icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png }
    - {name: 台湾节点, type: url-test, include-all: true, interval: 600, tolerance: 50,  filter: "台|湾|TW|(?i)Taiwan", icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png }
    - {name: 美国节点, type: url-test, include-all: true, interval: 600, tolerance: 50,  filter: "美|US|(?i)States|American", icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png }
    - {name: 狮城节点, type: url-test, include-all: true, interval: 600, tolerance: 50,  filter: "新|坡|SG|(?i)Singapore", icon: https://ghp.ci/https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png }
  
  # 分流规则 
  rule-providers:
    AdBlock:     {behavior: domain,    interval: 86400, format: text, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/Cats-Team/AdRules/main/adrules_domainset.txt ,                                           path: ./ruleset/anti-ad-clash.txt }
    OpenAi:      {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml ,                      path: ./ruleset/OpenAi.yaml       }
    Emby:        {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/ddgksf2013/Filter/master/Emby.yaml ,                                                     path: ./ruleset/Emby.yaml         }
    BiliBili:    {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml ,                  path: ./ruleset/BiliBili.yaml     }
    YouTube:     {behavior: classical, interval: 86400, format: yaml, type: http, url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml ,                                   path: ./ruleset/Youtube.yaml      }
    Bahamut:     {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml ,                    path: ./ruleset/Bahamut.yaml      } 
    GlobalMedia: {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml ,  path: ./ruleset/GlobalMedia.yaml  }
    Apple:       {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical.yaml ,              path: ./ruleset/Apple.yaml        }
    Github:      {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml ,                      path: ./ruleset/Github.yaml       }
    Microsoft:   {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml ,                path: ./ruleset/Microsoft.yaml    }
    Google:      {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml ,                      path: ./ruleset/Google.yaml       }
    Telegram:    {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml ,                  path: ./ruleset/Telegram.yaml     }
    Twitter:     {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml ,                    path: ./ruleset/Twitter.yaml      }
    Game:        {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml ,                          path: ./ruleset/Game.yaml         }
    ProxyLite:   {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ProxyLite/ProxyLite.yaml ,                path: ./ruleset/ProxyLite.yaml    }
    Direct:      {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml ,                      path: ./ruleset/Direct.yaml       }
    Lan:         {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml ,                            path: ./ruleset/Lan.yaml          }
    Download:    {behavior: classical, interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Download/Download.yaml ,                  path: ./ruleset/Download.yaml     }
    ChinaIP:     {behavior: ipcidr,    interval: 86400, format: yaml, type: http, url: https://ghp.ci/https://raw.githubusercontent.com/soffchen/GeoIP2-CN/release/clash-rule-provider.yml ,                                     path: ./ruleset/ChinaIP.yaml      }
    Notion:      {behavior: classical, interval: 86400, format: yaml, type: http, url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Notion/Notion.yaml ,                                     path: ./ruleset/Notion.yaml      }
  
    Netflix:     {behavior: classical, interval: 86400, format: yaml, type: http, url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Netflix/Netflix.yaml ,                        path: ./ruleset/Netflix.yaml      }
  # 分流Policy 
  rules:
    - RULE-SET,AdBlock,AdBlock
    - RULE-SET,OpenAi,OpenAi
    - RULE-SET,Emby,Emby服务
    - RULE-SET,BiliBili,哔哩哔哩
    - RULE-SET,Bahamut,哔哩哔哩
    - RULE-SET,YouTube,油管服务
    - RULE-SET,Netflix,Netflix奈飞
    - RULE-SET,GlobalMedia,国际媒体
    - RULE-SET,Apple,苹果服务
    - RULE-SET,Github,Github
    - RULE-SET,Microsoft,微软服务
    - RULE-SET,Google,谷歌服务
    - RULE-SET,Telegram,电报消息
    - RULE-SET,Twitter,谷歌服务
    - RULE-SET,Game,游戏平台
    - RULE-SET,ProxyLite,全球加速
    - RULE-SET,ChinaIP,DIRECT
    - RULE-SET,Direct,DIRECT
    - RULE-SET,Lan,DIRECT
    - RULE-SET,Download,DIRECT
    - GEOIP,CN,DIRECT
    - MATCH,兜底分流
    - RULE-SET,Notion,Notion
    - IP-CIDR,1.2.3.4/32,DIRECT
  
  
  
  
  
  
  profile:
    store-selected: true
  dns:
    enable: true
    listen: 0.0.0.0:1053
    use-system-hosts: false
    prefer-h3: true
    ipv6: true
    cache-algorithm: arc
    fake-ip-filter-mode: blacklist
    enhanced-mode: fake-ip
    fake-ip-filter:
      - '*'
      - '+.lan'
      - '+.local'
      - '+.msftconnecttest.com'
      - '+.msftnsci.com'
      - 'localhost.ptlogin2.qq.com'
      - 'localhost.sec.qq.com'
      - 'localhost.work.weixin.qq.com'
    nameserver:
      - https://dns.alidns.com/dns-query
      - https://doh.360.cn/dns-query
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query#h3=true
    default-nameserver:
      - tls://1.12.12.12
      - 223.5.5.5
    proxy-server-nameserver: 
      - https://1.1.1.1/dns-query
      - https://1.0.0.1/dns-query
      - https://208.67.222.222/dns-query
      - https://208.67.220.220/dns-query
      - https://194.242.2.2/dns-query
      # - https://doh.pub/dns-query
    fallback:
      - https://1.1.1.1/dns-query#唯快不破
      - https://dns.google/dns-query#唯快不破
    fallback-filter:
      geoip: true
      geoip-code: CN
      ipcidr:
        - 240.0.0.0/4
      domain:
        - '+.google.com'
        - '+.facebook.com'
        - '+.youtube.com'
        - '+.instagram.com'
    nameserver-policy:
      '+.devdev1.cn': 'https://dns.yyds.cn/dns-query/mydns'
      '+.auok.cn': 'https://dns.yyds.cn/dns-query/mydns'
      '+.ok123.pub': 'https://dns.yyds.cn/dns-query/mydns'
      '+.devops.com': 'https://dns.yyds.cn/dns-query/mydns'
      "geosite:cn,private,apple,microsoft,onedrive":
        - https://doh.pub/dns-query
        - https://dns.alidns.com/dns-query
  unified-delay: true
  tcp-concurrent: true
  
  tun:
    enable: true
    stack: mixed
    auto-route: true
    auto-redirect: true
    auto-detect-interface: true
    dns-hijack:
      - any:53
      - tcp://any:53
    device: utun0
    mtu: 1500
    strict-route: true
    gso: true
    gso-max-size: 65536
    udp-timeout: 300
    iproute2-table-index: 2022
    iproute2-rule-index: 9000
    endpoint-independent-nat: false
    route-address-set:
      - ruleset-1
    route-exclude-address-set:
      - ruleset-2
    route-address:
      - 0.0.0.0/1
      - 128.0.0.0/1
      - "::/1"
      - "8000::/1"
    route-exclude-address:
      - 192.168.0.0/16
      - fc00::/7
    include-interface:
      - eth0
    exclude-interface:
      - eth1
    include-uid:
      - 0
    include-uid-range:
      - 1000:9999
    exclude-uid:
      - 1000
    exclude-uid-range:
      - 1000:9999
    include-android-user:
      - 0
      - 10
    include-package:
      - com.android.chrome
    exclude-package:
      - com.android.captiveportallogin
    rules:
  
    # - DOMAIN-KEYWORD,hhu,Direct,no-resolve
  